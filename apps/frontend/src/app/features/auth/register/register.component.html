<<<<<<< HEAD
<div class="register-container" [@fadeIn]>
  <mat-card class="register-card">
    <!-- Header -->
    <mat-card-header class="register-header">
      <div class="logo-container">
        <img src="assets/images/logo.svg" alt="{{ 'app.name' | translate }}" class="logo" />
      </div>
      <h1 class="register-title">{{ 'auth.register.title' | translate }}</h1>
      <p class="register-subtitle">{{ 'auth.register.subtitle' | translate }}</p>
      
      <!-- Progress Bar -->
      <div class="progress-container">
        <mat-progress-bar
          mode="determinate"
          [value]="registrationProgress()"
          color="primary"
        ></mat-progress-bar>
        <div class="step-indicators">
          <div 
            class="step-indicator" 
            *ngFor="let step of [0, 1, 2]; let i = index"
            [class.active]="currentStep() >= i"
            [class.completed]="currentStep() > i"
            (click)="goToStep(i)"
          >
            <mat-icon *ngIf="currentStep() > i">check_circle</mat-icon>
            <span *ngIf="currentStep() <= i">{{ i + 1 }}</span>
          </div>
        </div>
      </div>
    </mat-card-header>

    <!-- Registration Steps -->
    <mat-card-content class="register-content">
      <!-- Step 1: Account Information -->
      <div class="step-content" *ngIf="currentStep() === 0" [@slideIn]>
        <h2 class="step-title">{{ 'auth.register.steps.account.title' | translate }}</h2>
        <p class="step-description">{{ 'auth.register.steps.account.description' | translate }}</p>
        
        <form [formGroup]="accountForm" class="register-form">
          <!-- Email Field -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ 'auth.register.email.label' | translate }}</mat-label>
            <input
              matInput
              type="email"
              formControlName="email"
              placeholder="{{ 'auth.register.email.placeholder' | translate }}"
              autocomplete="email"
            />
            <mat-icon matPrefix>email</mat-icon>
            <mat-spinner 
              matSuffix 
              *ngIf="emailAvailable() === null && accountForm.get('email')?.value"
              diameter="20"
            ></mat-spinner>
            <mat-icon 
              matSuffix 
              *ngIf="emailAvailable() === true"
              color="primary"
            >check_circle</mat-icon>
            <mat-icon 
              matSuffix 
              *ngIf="emailAvailable() === false"
              color="warn"
            >cancel</mat-icon>
            <mat-error *ngIf="accountForm.get('email')?.touched">
              {{ getErrorMessage(accountForm, 'email') }}
            </mat-error>
            <mat-hint *ngIf="accountForm.get('email')?.errors?.['suggestion']">
              {{ 'auth.register.email.suggestion' | translate: { domain: accountForm.get('email')?.errors?.['suggestion'] } }}
            </mat-hint>
          </mat-form-field>

          <!-- Username Field -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ 'auth.register.username.label' | translate }}</mat-label>
            <input
              matInput
              type="text"
              formControlName="username"
              placeholder="{{ 'auth.register.username.placeholder' | translate }}"
              autocomplete="username"
            />
            <mat-icon matPrefix>person</mat-icon>
            <mat-spinner 
              matSuffix 
              *ngIf="usernameAvailable() === null && accountForm.get('username')?.value"
              diameter="20"
            ></mat-spinner>
            <mat-icon 
              matSuffix 
              *ngIf="usernameAvailable() === true"
              color="primary"
            >check_circle</mat-icon>
            <mat-icon 
              matSuffix 
              *ngIf="usernameAvailable() === false"
              color="warn"
            >cancel</mat-icon>
            <mat-error *ngIf="accountForm.get('username')?.touched">
              {{ getErrorMessage(accountForm, 'username') }}
            </mat-error>
          </mat-form-field>

          <!-- Password Field -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ 'auth.register.password.label' | translate }}</mat-label>
            <input
              matInput
              [type]="hidePassword() ? 'password' : 'text'"
              formControlName="password"
              placeholder="{{ 'auth.register.password.placeholder' | translate }}"
              autocomplete="new-password"
            />
            <mat-icon matPrefix>lock</mat-icon>
            <button
              mat-icon-button
              matSuffix
              type="button"
              (click)="togglePasswordVisibility('password')"
              [matTooltip]="hidePassword() ? ('auth.register.password.show' | translate) : ('auth.register.password.hide' | translate)"
            >
              <mat-icon>{{ hidePassword() ? 'visibility' : 'visibility_off' }}</mat-icon>
            </button>
            <mat-error *ngIf="accountForm.get('password')?.touched">
              {{ getErrorMessage(accountForm, 'password') }}
            </mat-error>
          </mat-form-field>

          <!-- Password Strength Indicator -->
          <div class="password-strength" *ngIf="accountForm.get('password')?.value">
            <div class="strength-bars">
              <div
                class="strength-bar"
                *ngFor="let i of [1,2,3,4,5]"
                [class.active]="passwordStrength() >= i"
                [class]="passwordStrength() >= i ? getPasswordStrengthColor() : ''"
              ></div>
            </div>
            <span class="strength-label" [class]="getPasswordStrengthColor()">
              {{ getPasswordStrengthLabel() }}
            </span>
          </div>

          <!-- Password Requirements -->
          <div class="password-requirements" *ngIf="accountForm.get('password')?.touched && accountForm.get('password')?.errors">
            <mat-icon 
              [color]="!accountForm.get('password')?.errors?.['lowercase'] ? 'primary' : 'warn'"
            >{{ !accountForm.get('password')?.errors?.['lowercase'] ? 'check' : 'close' }}</mat-icon>
            <span>{{ 'auth.register.password.requirements.lowercase' | translate }}</span>
            
            <mat-icon 
              [color]="!accountForm.get('password')?.errors?.['uppercase'] ? 'primary' : 'warn'"
            >{{ !accountForm.get('password')?.errors?.['uppercase'] ? 'check' : 'close' }}</mat-icon>
            <span>{{ 'auth.register.password.requirements.uppercase' | translate }}</span>
            
            <mat-icon 
              [color]="!accountForm.get('password')?.errors?.['number'] ? 'primary' : 'warn'"
            >{{ !accountForm.get('password')?.errors?.['number'] ? 'check' : 'close' }}</mat-icon>
            <span>{{ 'auth.register.password.requirements.number' | translate }}</span>
            
            <mat-icon 
              [color]="!accountForm.get('password')?.errors?.['special'] ? 'primary' : 'warn'"
            >{{ !accountForm.get('password')?.errors?.['special'] ? 'check' : 'close' }}</mat-icon>
            <span>{{ 'auth.register.password.requirements.special' | translate }}</span>
          </div>

          <!-- Confirm Password Field -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ 'auth.register.confirmPassword.label' | translate }}</mat-label>
            <input
              matInput
              [type]="hideConfirmPassword() ? 'password' : 'text'"
              formControlName="confirmPassword"
              placeholder="{{ 'auth.register.confirmPassword.placeholder' | translate }}"
              autocomplete="new-password"
            />
            <mat-icon matPrefix>lock_outline</mat-icon>
            <button
              mat-icon-button
              matSuffix
              type="button"
              (click)="togglePasswordVisibility('confirm')"
              [matTooltip]="hideConfirmPassword() ? ('auth.register.password.show' | translate) : ('auth.register.password.hide' | translate)"
            >
              <mat-icon>{{ hideConfirmPassword() ? 'visibility' : 'visibility_off' }}</mat-icon>
            </button>
            <mat-icon 
              matSuffix 
              *ngIf="passwordMatch() && accountForm.get('confirmPassword')?.value"
              color="primary"
            >check_circle</mat-icon>
            <mat-error *ngIf="accountForm.hasError('passwordMismatch') && accountForm.get('confirmPassword')?.touched">
              {{ 'auth.register.errors.passwordMismatch' | translate }}
            </mat-error>
          </mat-form-field>
        </form>

        <!-- Social Registration -->
        <div class="divider-container">
          <mat-divider></mat-divider>
          <span class="divider-text">{{ 'auth.register.or' | translate }}</span>
          <mat-divider></mat-divider>
        </div>

        <div class="social-buttons">
          <button
            mat-stroked-button
            class="social-button google-button"
            (click)="socialRegister('google')"
            [disabled]="socialRegistrationLoading() === 'google'"
          >
            <mat-spinner
              *ngIf="socialRegistrationLoading() === 'google'"
              diameter="20"
              class="button-spinner"
            ></mat-spinner>
            <img
              *ngIf="socialRegistrationLoading() !== 'google'"
              src="assets/images/google-logo.svg"
              alt="Google"
              class="social-icon"
            />
            <span>{{ 'auth.register.social.google' | translate }}</span>
          </button>

          <button
            mat-stroked-button
            class="social-button github-button"
            (click)="socialRegister('github')"
            [disabled]="socialRegistrationLoading() === 'github'"
          >
            <mat-spinner
              *ngIf="socialRegistrationLoading() === 'github'"
              diameter="20"
              class="button-spinner"
            ></mat-spinner>
            <img
              *ngIf="socialRegistrationLoading() !== 'github'"
              src="assets/images/github-logo.svg"
              alt="GitHub"
              class="social-icon"
            />
            <span>{{ 'auth.register.social.github' | translate }}</span>
          </button>
        </div>
      </div>

      <!-- Step 2: Profile Information -->
      <div class="step-content" *ngIf="currentStep() === 1" [@slideIn]>
        <h2 class="step-title">{{ 'auth.register.steps.profile.title' | translate }}</h2>
        <p class="step-description">{{ 'auth.register.steps.profile.description' | translate }}</p>
        
        <form [formGroup]="profileForm" class="register-form">
          <!-- Profile Picture -->
          <div class="profile-picture-container">
            <div class="profile-picture-preview" (click)="profilePictureInput.click()">
              <img 
                *ngIf="profilePicturePreview()" 
                [src]="profilePicturePreview()" 
                alt="Profile preview"
              />
              <mat-icon *ngIf="!profilePicturePreview()">add_a_photo</mat-icon>
            </div>
            <input 
              #profilePictureInput
              type="file" 
              accept="image/*" 
              (change)="onProfilePictureChange($event)"
              hidden
            />
            <p class="profile-picture-hint">{{ 'auth.register.profile.pictureHint' | translate }}</p>
          </div>

          <div class="name-row">
            <!-- First Name -->
            <mat-form-field appearance="outline">
              <mat-label>{{ 'auth.register.firstName.label' | translate }}</mat-label>
              <input
                matInput
                type="text"
                formControlName="firstName"
                placeholder="{{ 'auth.register.firstName.placeholder' | translate }}"
                autocomplete="given-name"
              />
              <mat-icon matPrefix>badge</mat-icon>
              <mat-error *ngIf="profileForm.get('firstName')?.touched">
                {{ getErrorMessage(profileForm, 'firstName') }}
              </mat-error>
            </mat-form-field>

            <!-- Last Name -->
            <mat-form-field appearance="outline">
              <mat-label>{{ 'auth.register.lastName.label' | translate }}</mat-label>
              <input
                matInput
                type="text"
                formControlName="lastName"
                placeholder="{{ 'auth.register.lastName.placeholder' | translate }}"
                autocomplete="family-name"
              />
              <mat-error *ngIf="profileForm.get('lastName')?.touched">
                {{ getErrorMessage(profileForm, 'lastName') }}
              </mat-error>
            </mat-form-field>
          </div>

          <!-- Phone Number -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ 'auth.register.phone.label' | translate }}</mat-label>
            <input
              matInput
              type="tel"
              formControlName="phoneNumber"
              placeholder="{{ 'auth.register.phone.placeholder' | translate }}"
              autocomplete="tel"
            />
            <mat-icon matPrefix>phone</mat-icon>
            <mat-error *ngIf="profileForm.get('phoneNumber')?.touched">
              {{ getErrorMessage(profileForm, 'phoneNumber') }}
            </mat-error>
          </mat-form-field>

          <!-- Date of Birth -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ 'auth.register.dateOfBirth.label' | translate }}</mat-label>
            <input
              matInput
              [matDatepicker]="picker"
              formControlName="dateOfBirth"
              placeholder="{{ 'auth.register.dateOfBirth.placeholder' | translate }}"
            />
            <mat-icon matPrefix>cake</mat-icon>
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>

          <div class="company-role-row">
            <!-- Company -->
            <mat-form-field appearance="outline">
              <mat-label>{{ 'auth.register.company.label' | translate }}</mat-label>
=======
<div class="register-container" @fadeInOut>
  <mat-card class="register-card">
    <mat-card-header>
      <div class="register-header">
        <img src="assets/logo.svg" alt="SCRUM Project Manager" class="logo" />
        <h1 class="title">Create Your Account</h1>
        <p class="subtitle">Join thousands of teams using SCRUM Project Manager</p>
      </div>
    </mat-card-header>

    <mat-card-content>
      <!-- Progress Stepper -->
      <mat-stepper #stepper [selectedIndex]="currentStep()" class="register-stepper">
        <!-- Step 1: Account Information -->
        <mat-step [stepControl]="accountForm" [editable]="true">
          <ng-template matStepLabel>Account</ng-template>
          
          <form [formGroup]="accountForm" class="step-form" @slideIn>
            <h2 class="step-title">Account Information</h2>
            
            <!-- Email Field -->
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Email Address</mat-label>
              <input
                matInput
                type="email"
                formControlName="email"
                placeholder="Enter your email"
                autocomplete="email"
                [attr.aria-label]="'Email address'"
                [attr.aria-invalid]="hasError('account', 'email')"
              />
              <mat-icon matPrefix>email</mat-icon>
              <mat-icon matSuffix *ngIf="emailAvailable() === true" class="success-icon">check_circle</mat-icon>
              <mat-icon matSuffix *ngIf="emailAvailable() === false" class="error-icon">cancel</mat-icon>
              <mat-error *ngIf="hasError('account', 'email')">
                {{ getErrorMessage('account', 'email') }}
              </mat-error>
              <mat-hint>We'll use this for login and notifications</mat-hint>
            </mat-form-field>

            <!-- Password Field -->
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Password</mat-label>
              <input
                matInput
                [type]="hidePassword() ? 'password' : 'text'"
                formControlName="password"
                placeholder="Create a strong password"
                autocomplete="new-password"
                [attr.aria-label]="'Password'"
                [attr.aria-invalid]="hasError('account', 'password')"
              />
              <mat-icon matPrefix>lock</mat-icon>
              <button
                mat-icon-button
                matSuffix
                type="button"
                (click)="togglePasswordVisibility()"
                [attr.aria-label]="hidePassword() ? 'Show password' : 'Hide password'"
              >
                <mat-icon>{{ hidePassword() ? 'visibility' : 'visibility_off' }}</mat-icon>
              </button>
              <mat-error *ngIf="hasError('account', 'password')">
                {{ getErrorMessage('account', 'password') }}
              </mat-error>
            </mat-form-field>

            <!-- Password Strength Indicator -->
            <div class="password-strength" *ngIf="accountForm.get('password')?.value">
              <div class="strength-bar">
                <div 
                  class="strength-fill" 
                  [style.width.%]="passwordStrength()"
                  [class.weak]="passwordStrength() < 30"
                  [class.medium]="passwordStrength() >= 30 && passwordStrength() < 60"
                  [class.strong]="passwordStrength() >= 60"
                ></div>
              </div>
              <span class="strength-label">{{ getPasswordStrengthLabel() }}</span>
            </div>

            <!-- Confirm Password Field -->
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Confirm Password</mat-label>
              <input
                matInput
                [type]="hideConfirmPassword() ? 'password' : 'text'"
                formControlName="confirmPassword"
                placeholder="Re-enter your password"
                autocomplete="new-password"
                [attr.aria-label]="'Confirm password'"
                [attr.aria-invalid]="hasError('account', 'confirmPassword')"
              />
              <mat-icon matPrefix>lock_outline</mat-icon>
              <button
                mat-icon-button
                matSuffix
                type="button"
                (click)="toggleConfirmPasswordVisibility()"
                [attr.aria-label]="hideConfirmPassword() ? 'Show password' : 'Hide password'"
              >
                <mat-icon>{{ hideConfirmPassword() ? 'visibility' : 'visibility_off' }}</mat-icon>
              </button>
              <mat-error *ngIf="hasError('account', 'confirmPassword')">
                {{ getErrorMessage('account', 'confirmPassword') }}
              </mat-error>
            </mat-form-field>

            <div class="step-actions">
              <button mat-button routerLink="/auth/login" type="button">Back to Login</button>
              <button 
                mat-raised-button 
                color="primary" 
                type="button"
                (click)="nextStep()"
                [disabled]="!canProceed()"
              >
                Next
                <mat-icon>arrow_forward</mat-icon>
              </button>
            </div>
          </form>
        </mat-step>

        <!-- Step 2: Profile Information -->
        <mat-step [stepControl]="profileForm" [editable]="true">
          <ng-template matStepLabel>Profile</ng-template>
          
          <form [formGroup]="profileForm" class="step-form" @slideIn>
            <h2 class="step-title">Profile Information</h2>
            
            <div class="form-row">
              <!-- First Name Field -->
              <mat-form-field appearance="outline" class="half-width">
                <mat-label>First Name</mat-label>
                <input
                  matInput
                  type="text"
                  formControlName="firstName"
                  placeholder="Enter your first name"
                  autocomplete="given-name"
                  [attr.aria-label]="'First name'"
                />
                <mat-icon matPrefix>person</mat-icon>
                <mat-error *ngIf="hasError('profile', 'firstName')">
                  {{ getErrorMessage('profile', 'firstName') }}
                </mat-error>
              </mat-form-field>

              <!-- Last Name Field -->
              <mat-form-field appearance="outline" class="half-width">
                <mat-label>Last Name</mat-label>
                <input
                  matInput
                  type="text"
                  formControlName="lastName"
                  placeholder="Enter your last name"
                  autocomplete="family-name"
                  [attr.aria-label]="'Last name'"
                />
                <mat-icon matPrefix>person_outline</mat-icon>
                <mat-error *ngIf="hasError('profile', 'lastName')">
                  {{ getErrorMessage('profile', 'lastName') }}
                </mat-error>
              </mat-form-field>
            </div>

            <!-- Phone Field -->
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Phone Number (Optional)</mat-label>
              <input
                matInput
                type="tel"
                formControlName="phone"
                placeholder="+1 (555) 123-4567"
                autocomplete="tel"
                [attr.aria-label]="'Phone number'"
              />
              <mat-icon matPrefix>phone</mat-icon>
              <mat-hint>Used for two-factor authentication</mat-hint>
            </mat-form-field>

            <!-- Company Field -->
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Company (Optional)</mat-label>
>>>>>>> feature/SPM-016-projects-tasks
              <input
                matInput
                type="text"
                formControlName="company"
<<<<<<< HEAD
                placeholder="{{ 'auth.register.company.placeholder' | translate }}"
                autocomplete="organization"
              />
              <mat-icon matPrefix>business</mat-icon>
            </mat-form-field>

            <!-- Role -->
            <mat-form-field appearance="outline">
              <mat-label>{{ 'auth.register.role.label' | translate }}</mat-label>
              <mat-select formControlName="role">
                <mat-option *ngFor="let role of roles()" [value]="role">
                  {{ 'auth.register.roles.' + role | translate }}
                </mat-option>
              </mat-select>
              <mat-icon matPrefix>work</mat-icon>
            </mat-form-field>
          </div>

          <!-- Bio -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ 'auth.register.bio.label' | translate }}</mat-label>
            <textarea
              matInput
              formControlName="bio"
              placeholder="{{ 'auth.register.bio.placeholder' | translate }}"
              rows="4"
              maxlength="500"
            ></textarea>
            <mat-icon matPrefix>description</mat-icon>
            <mat-hint align="end">
              {{ profileForm.get('bio')?.value?.length || 0 }}/500
            </mat-hint>
            <mat-error *ngIf="profileForm.get('bio')?.touched">
              {{ getErrorMessage(profileForm, 'bio') }}
            </mat-error>
          </mat-form-field>
        </form>
      </div>

      <!-- Step 3: Preferences -->
      <div class="step-content" *ngIf="currentStep() === 2" [@slideIn]>
        <h2 class="step-title">{{ 'auth.register.steps.preferences.title' | translate }}</h2>
        <p class="step-description">{{ 'auth.register.steps.preferences.description' | translate }}</p>
        
        <form [formGroup]="preferencesForm" class="register-form">
          <div class="locale-row">
            <!-- Timezone -->
            <mat-form-field appearance="outline">
              <mat-label>{{ 'auth.register.timezone.label' | translate }}</mat-label>
              <mat-select formControlName="timezone">
                <mat-option *ngFor="let tz of timezones()" [value]="tz">
                  {{ tz }}
                </mat-option>
              </mat-select>
              <mat-icon matPrefix>schedule</mat-icon>
            </mat-form-field>

            <!-- Locale -->
            <mat-form-field appearance="outline">
              <mat-label>{{ 'auth.register.locale.label' | translate }}</mat-label>
              <mat-select formControlName="locale">
                <mat-option *ngFor="let locale of locales()" [value]="locale.code">
                  {{ locale.name }}
                </mat-option>
              </mat-select>
              <mat-icon matPrefix>language</mat-icon>
            </mat-form-field>
          </div>

          <!-- Notification Preferences -->
          <div class="preferences-section">
            <h3 class="section-title">{{ 'auth.register.notifications.title' | translate }}</h3>
            
            <mat-checkbox formControlName="newsletter" color="primary">
              {{ 'auth.register.notifications.newsletter' | translate }}
            </mat-checkbox>
            
            <mat-checkbox formControlName="notifications" color="primary">
              {{ 'auth.register.notifications.updates' | translate }}
            </mat-checkbox>
            
            <mat-checkbox formControlName="marketingEmails" color="primary">
              {{ 'auth.register.notifications.marketing' | translate }}
            </mat-checkbox>
          </div>

          <!-- Legal Agreements -->
          <div class="legal-section">
            <h3 class="section-title">{{ 'auth.register.legal.title' | translate }}</h3>
            
            <mat-checkbox formControlName="termsAccepted" color="primary" class="legal-checkbox">
              <span>
                {{ 'auth.register.legal.terms.prefix' | translate }}
                <a (click)="openTerms()" class="legal-link">
                  {{ 'auth.register.legal.terms.link' | translate }}
                </a>
              </span>
            </mat-checkbox>
            
            <mat-checkbox formControlName="privacyAccepted" color="primary" class="legal-checkbox">
              <span>
                {{ 'auth.register.legal.privacy.prefix' | translate }}
                <a (click)="openPrivacy()" class="legal-link">
                  {{ 'auth.register.legal.privacy.link' | translate }}
                </a>
              </span>
            </mat-checkbox>
          </div>
        </form>
      </div>

      <!-- Step 4: Completion -->
      <div class="step-content completion-step" *ngIf="currentStep() === 3" [@bounce]>
        <div class="success-icon">
          <mat-icon color="primary">check_circle</mat-icon>
        </div>
        <h2 class="step-title">{{ 'auth.register.completion.title' | translate }}</h2>
        <p class="step-description">{{ 'auth.register.completion.description' | translate }}</p>
        <p class="redirect-message">{{ 'auth.register.completion.redirect' | translate }}</p>
        <mat-spinner diameter="30" color="primary"></mat-spinner>
      </div>

      <!-- Navigation Buttons -->
      <div class="navigation-buttons" *ngIf="currentStep() < 3">
        <button
          mat-button
          class="nav-button prev-button"
          (click)="previousStep()"
          [disabled]="currentStep() === 0"
        >
          <mat-icon>arrow_back</mat-icon>
          {{ 'auth.register.buttons.previous' | translate }}
        </button>

        <button
          mat-raised-button
          color="primary"
          class="nav-button next-button"
          (click)="currentStep() === 2 ? onSubmit() : nextStep()"
          [disabled]="!canProceed() || isSubmitting()"
        >
          <mat-spinner
            *ngIf="isSubmitting()"
            diameter="20"
            class="button-spinner"
          ></mat-spinner>
          <span *ngIf="!isSubmitting()">
            {{ currentStep() === 2 ? ('auth.register.buttons.submit' | translate) : ('auth.register.buttons.next' | translate) }}
          </span>
          <mat-icon *ngIf="!isSubmitting() && currentStep() < 2">arrow_forward</mat-icon>
        </button>
      </div>

      <!-- Keyboard Shortcuts -->
      <div class="shortcuts-hint" *ngIf="currentStep() < 3">
        <mat-icon>keyboard</mat-icon>
        <span>
          {{ currentStep() === 2 ? ('auth.register.shortcuts.submit' | translate) : ('auth.register.shortcuts.navigate' | translate) }}
        </span>
      </div>
    </mat-card-content>

    <!-- Footer -->
    <mat-card-footer class="register-footer" *ngIf="currentStep() < 3">
      <p class="login-prompt">
        {{ 'auth.register.hasAccount' | translate }}
        <a
          class="login-link"
          (click)="navigateToLogin()"
        >
          {{ 'auth.register.login' | translate }}
        </a>
      </p>
    </mat-card-footer>
  </mat-card>
</div>
=======
                placeholder="Enter your company name"
                autocomplete="organization"
                [attr.aria-label]="'Company name'"
              />
              <mat-icon matPrefix>business</mat-icon>
              <mat-error *ngIf="hasError('profile', 'company')">
                {{ getErrorMessage('profile', 'company') }}
              </mat-error>
            </mat-form-field>

            <!-- Role Field -->
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Your Role</mat-label>
              <mat-select formControlName="role" [attr.aria-label]="'Role selection'">
                <mat-option *ngFor="let role of roles" [value]="role.value">
                  {{ role.label }}
                </mat-option>
              </mat-select>
              <mat-icon matPrefix>work</mat-icon>
              <mat-error *ngIf="hasError('profile', 'role')">
                {{ getErrorMessage('profile', 'role') }}
              </mat-error>
            </mat-form-field>

            <div class="step-actions">
              <button mat-button type="button" (click)="previousStep()">
                <mat-icon>arrow_back</mat-icon>
                Previous
              </button>
              <button 
                mat-raised-button 
                color="primary" 
                type="button"
                (click)="nextStep()"
                [disabled]="!canProceed()"
              >
                Next
                <mat-icon>arrow_forward</mat-icon>
              </button>
            </div>
          </form>
        </mat-step>

        <!-- Step 3: Preferences -->
        <mat-step [stepControl]="preferencesForm">
          <ng-template matStepLabel>Preferences</ng-template>
          
          <form [formGroup]="preferencesForm" class="step-form" @slideIn>
            <h2 class="step-title">Preferences & Terms</h2>
            
            <div class="form-row">
              <!-- Language Field -->
              <mat-form-field appearance="outline" class="half-width">
                <mat-label>Language</mat-label>
                <mat-select formControlName="language" [attr.aria-label]="'Language selection'">
                  <mat-option value="en">English</mat-option>
                  <mat-option value="es">Español</mat-option>
                  <mat-option value="fr">Français</mat-option>
                  <mat-option value="de">Deutsch</mat-option>
                  <mat-option value="pt">Português</mat-option>
                  <mat-option value="it">Italiano</mat-option>
                  <mat-option value="ja">日本語</mat-option>
                  <mat-option value="zh">中文</mat-option>
                </mat-select>
                <mat-icon matPrefix>language</mat-icon>
              </mat-form-field>

              <!-- Timezone Field -->
              <mat-form-field appearance="outline" class="half-width">
                <mat-label>Timezone</mat-label>
                <mat-select formControlName="timezone" [attr.aria-label]="'Timezone selection'">
                  <mat-option *ngFor="let tz of timezones" [value]="tz.value">
                    {{ tz.label }}
                  </mat-option>
                </mat-select>
                <mat-icon matPrefix>schedule</mat-icon>
              </mat-form-field>
            </div>

            <!-- Notification Preferences -->
            <div class="notification-preferences">
              <h3 class="section-title">Notification Preferences</h3>
              
              <mat-checkbox formControlName="emailNotifications" color="primary">
                <span class="checkbox-label">
                  <mat-icon>email</mat-icon>
                  Email notifications for important updates
                </span>
              </mat-checkbox>

              <mat-checkbox formControlName="pushNotifications" color="primary">
                <span class="checkbox-label">
                  <mat-icon>notifications</mat-icon>
                  Browser push notifications
                </span>
              </mat-checkbox>

              <mat-checkbox formControlName="marketingEmails" color="primary">
                <span class="checkbox-label">
                  <mat-icon>campaign</mat-icon>
                  Marketing emails and product updates
                </span>
              </mat-checkbox>
            </div>

            <!-- Terms and Conditions -->
            <div class="terms-section">
              <mat-checkbox formControlName="terms" color="primary" class="terms-checkbox">
                I accept the 
                <a href="/terms" target="_blank" rel="noopener noreferrer">Terms and Conditions</a>
              </mat-checkbox>
              <mat-error *ngIf="hasError('preferences', 'terms')" class="checkbox-error">
                {{ getErrorMessage('preferences', 'terms') }}
              </mat-error>

              <mat-checkbox formControlName="privacy" color="primary" class="terms-checkbox">
                I have read and agree to the 
                <a href="/privacy" target="_blank" rel="noopener noreferrer">Privacy Policy</a>
              </mat-checkbox>
              <mat-error *ngIf="hasError('preferences', 'privacy')" class="checkbox-error">
                You must agree to the privacy policy
              </mat-error>
            </div>

            <div class="step-actions">
              <button mat-button type="button" (click)="previousStep()">
                <mat-icon>arrow_back</mat-icon>
                Previous
              </button>
              <button 
                mat-raised-button 
                color="primary" 
                type="submit"
                (click)="onSubmit()"
                [disabled]="!canProceed() || isLoading()"
              >
                <mat-spinner
                  *ngIf="isLoading()"
                  diameter="20"
                  class="button-spinner"
                ></mat-spinner>
                <span *ngIf="!isLoading()">Create Account</span>
                <span *ngIf="isLoading()">Creating...</span>
              </button>
            </div>
          </form>
        </mat-step>
      </mat-stepper>

      <!-- Error Message -->
      <div class="error-message" *ngIf="authError$ | async as error" @fadeInOut>
        <mat-icon>error</mat-icon>
        <span>{{ error }}</span>
      </div>

      <!-- Divider -->
      <div class="divider-container">
        <mat-divider></mat-divider>
        <span class="divider-text">OR</span>
        <mat-divider></mat-divider>
      </div>

      <!-- Social Registration -->
      <div class="social-register">
        <button
          mat-stroked-button
          type="button"
          class="social-button google-button"
          (click)="socialRegister('google')"
          [disabled]="isLoading()"
        >
          <img src="assets/icons/google.svg" alt="Google" class="social-icon" />
          <span>Sign up with Google</span>
        </button>

        <button
          mat-stroked-button
          type="button"
          class="social-button github-button"
          (click)="socialRegister('github')"
          [disabled]="isLoading()"
        >
          <img src="assets/icons/github.svg" alt="GitHub" class="social-icon" />
          <span>Sign up with GitHub</span>
        </button>
      </div>
    </mat-card-content>

    <mat-card-footer>
      <div class="footer-links">
        <p class="login-prompt">
          Already have an account?
          <a routerLink="/auth/login" class="login-link">Sign in</a>
        </p>
      </div>
    </mat-card-footer>
  </mat-card>

  <!-- Background decoration -->
  <div class="background-decoration">
    <div class="shape shape-1"></div>
    <div class="shape shape-2"></div>
    <div class="shape shape-3"></div>
  </div>
</div>
>>>>>>> feature/SPM-016-projects-tasks
